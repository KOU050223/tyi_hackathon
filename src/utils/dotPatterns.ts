import type {
  Expression,
  DotPattern,
  ExpressionPatterns,
} from "@/types/expression";

/**
 * 各表情に対応するドット絵パターン定義
 * 0 = 透明, 1 = 塗りつぶし
 */

// 目のみのパターン（スマートフォン用）
const eyeOnlyPatterns: ExpressionPatterns = {
  neutral: {
    color: "#E66CBC",
    grid: [
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
      [0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
    ],
  },
  smile: {
    color: "#FFFF00",
    grid: [
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
    ],
  },
  surprised: {
    color: "#FF6600",
    grid: [
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
      [0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
    ],
  },
  blink: {
    color: "#E66CBC",
    grid: [
      [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
      [0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
    ],
  },
  sad: {
    color: "#4444FF",
    grid: [
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
      [0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
    ],
  },
  angry: {
    color: "#FF0000",
    grid: [
      [1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1],
      [0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0],
      [0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0],
      [0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0],
      [0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0],
    ],
  },
  confused: {
    color: "#FFAA00",
    grid: [
      [0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0],
      [1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0],
      [1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1],
      [1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1],
      [0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0],
      [0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0],
    ],
  },
  smug: {
    color: "#FF00FF",
    grid: [
      // 左目閉じ（ウインク）、右目開く
      [1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0],
      [0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0],
      [0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1],
      [0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1],
      [1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0],
    ],
  },
  questioning: {
    color: "#00FFFF",
    grid: [
      // 片眉上昇
      [0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0],
      [1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0],
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
    ],
  },
  embarrassed: {
    color: "#FFAAAA",
    grid: [
      // 目が点
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    ],
  },
};

// 目 + 口のパターン（タブレット用）
const fullPatterns: ExpressionPatterns = {
  neutral: {
    color: "#E66CBC",
    grid: [
      // 目
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
      [0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      // 口
      [0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    ],
  },
  smile: {
    color: "#FFFF00",
    grid: [
      // 目
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      // 口（笑顔）
      [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
      [0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],
    ],
  },
  surprised: {
    color: "#FF6600",
    grid: [
      // 目（大きく開いた）
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
      [0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      // 口（驚き）
      [0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0],
      [0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0],
      [0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0],
    ],
  },
  sad: {
    color: "#4444FF",
    grid: [
      // 目（下がった）
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
      [0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      // 口（下向き）
      [0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],
      [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
    ],
  },
  angry: {
    color: "#FF0000",
    grid: [
      // 目（眉が下がっている）
      [1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1],
      [0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0],
      [0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0],
      [0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0],
      [0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      // 口（一直線）
      [0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],
    ],
  },
  confused: {
    color: "#FFAA00",
    grid: [
      // 目（困惑）
      [0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0],
      [1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0],
      [1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1],
      [1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1],
      [0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0],
      [0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      // 口（波線）
      [0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0],
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
    ],
  },
  smug: {
    color: "#FF00FF",
    grid: [
      // 左目閉じ（ウインク）、右目開く
      [1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0],
      [0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0],
      [0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1],
      [0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1],
      [1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      // 口（にやり）
      [0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0],
      [0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1],
    ],
  },
  questioning: {
    color: "#00FFFF",
    grid: [
      // 片眉上昇
      [0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0],
      [1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0],
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1],
      [0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0],
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      // 口（？の形）
      [0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0],
    ],
  },
  embarrassed: {
    color: "#FFAAAA",
    grid: [
      // 目が点
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
      [0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      // 頬の斜線
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
      [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
      // 口（小さく）
      [0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],
    ],
  },
};

/**
 * デバイスタイプに応じた表情パターンを取得
 */
export const getDotPattern = (
  expression: Expression,
  deviceType: "smartphone" | "tablet",
): DotPattern => {
  const patterns = deviceType === "smartphone" ? eyeOnlyPatterns : fullPatterns;
  return patterns[expression] || patterns.neutral;
};

/**
 * 目のみのパターンを取得（スマートフォン用）
 */
export const getEyeOnlyPattern = (expression: Expression): DotPattern => {
  return eyeOnlyPatterns[expression] || eyeOnlyPatterns.neutral;
};

/**
 * 目 + 口のパターンを取得（タブレット用）
 */
export const getFullPattern = (expression: Expression): DotPattern => {
  return fullPatterns[expression] || fullPatterns.neutral;
};
